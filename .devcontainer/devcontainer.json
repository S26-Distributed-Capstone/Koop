{
	"name": "Java",
	"image": "mcr.microsoft.com/devcontainers/java:1-21-bullseye",
	"features": {
		"ghcr.io/devcontainers/features/java:1": {
			"version": "none",
			"installMaven": "true",
			"installGradle": "false"
		},
		"ghcr.io/devcontainers/features/copilot-cli:1": {
			"version": "latest"
		},
		"ghcr.io/devcontainers/features/git:1": {
			"ppa": true,
			"version": "os-provided"
		}
	},
	"mounts": [
		// 1. Maven Cache (Huge performance boost for dependency resolution)
		"source=${localWorkspaceFolderBasename}-m2,target=/home/vscode/.m2,type=volume",
		
		// 2. Root Target
		"source=${localWorkspaceFolderBasename}-root-target,target=${containerWorkspaceFolder}/target,type=volume",
		
		// 3. Child Module Targets
		"source=${localWorkspaceFolderBasename}-common-target,target=${containerWorkspaceFolder}/common-lib/target,type=volume",
		"source=${localWorkspaceFolderBasename}-query-target,target=${containerWorkspaceFolder}/query-processor/target,type=volume",
		"source=${localWorkspaceFolderBasename}-storage-target,target=${containerWorkspaceFolder}/storage-node/target,type=volume",
		"source=${localWorkspaceFolderBasename}-tests-target,target=${containerWorkspaceFolder}/system-tests/target,type=volume"
	],
	"postCreateCommand": "sudo chown -R vscode:vscode /home/vscode/.m2 ${containerWorkspaceFolder}/target ${containerWorkspaceFolder}/common-lib/target ${containerWorkspaceFolder}/query-processor/target ${containerWorkspaceFolder}/storage-node/target ${containerWorkspaceFolder}/system-tests/target"
}